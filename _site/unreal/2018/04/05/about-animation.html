<!doctype html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/grids-responsive-min.css">
  <link rel="stylesheet" href="/assets/styles.css">
</head>


  <body>

    <div class="container pure-g"><div class="sidebar-left pure-u-1 pure-u-md-1-4" style="background-color: rgb(40, 73, 77); color: rgb(255, 255, 255); "><header class="masthead">
  
  <div class="masthead-title">
    <a href="/" title="Home"></a>
  </div>
  <div class="masthead-tagline">
    <small></small>
  </div><nav class="navigation">
    <ul class="navigation-list"><li class="navigation-item">
        <a onclick="sessionStorage.setItem('forceCheckScroll', 'true')" href="/">Blog</a>
      </li><li class="navigation-item">
        <a onclick="sessionStorage.setItem('forceCheckScroll', 'true')" href="/about/">About</a>
      </li></ul>
  </nav><div class="social pure-menu pure-menu-horizontal">
      <ul class="social-icons pure-menu-list">
      <li class="pure-menu-item">
          <a class="social-icon pure-menu-link" href="mailto://vszhub@gmail.com">
            <i class="fas fa-envelope" title="Email"></i>
          </a>
        </li><li class="pure-menu-item">
          <a class="social-icon pure-menu-link" href="https://twitter.com/vszhub">
            <i class="fab fa-twitter" title="Twitter"></i>
          </a>
        </li><li class="pure-menu-item">
          <a class="social-icon pure-menu-link" href="https://github.com/vszhub/not-pure-poole">
            <i class="fab fa-github" title="GitHub"></i>
          </a>
        </li>
      </ul>
    </div>
</header>
</div>

      <div class="content pure-u-1 pure-u-md-1-2"><main>
  <article class="post">
  <h1 class="post-title">Unreal Engine Animation</h1>
  <div class="post-meta"><time datetime="2018-04-05T00:00:00+09:00" itemprop="datePublished">5 Apr 2018</time></div>

  <h4 id="최종-수정-2020-05-01">최종 수정 (2020-05-01)</h4>

<h1 id="애니메이션">애니메이션</h1>

<h2 id="애니메이션-블루프린트">애니메이션 블루프린트</h2>
<ul>
  <li>캐릭터가 다양한 상황에 적절한 애니메이션을 체계적으로 재생하도록 도와주는 애니메이션 시스템 제작 도구</li>
  <li>애님 그래프(Anim Graph)와 애님 인스턴스(Anim Instance)로 구성된다.</li>
</ul>

<h3 id="애님-인스턴스">애님 인스턴스</h3>
<ul>
  <li>시각적 도구를 사용해 애니메이션 시스템을 제작하도록 설계</li>
  <li>스켈레탈 메시를 소유하는 폰의 정보를 받아 애님 그래프가 참조할 데이터를 제공.</li>
  <li>블루프린트와 C++로 제작 가능</li>
  <li>틱마다 호출되는 NativeAnimationUpdate 가상함수 제공</li>
</ul>

<h3 id="애님-그래프">애님 그래프</h3>
<ul>
  <li>애니메이션 블루프린트의 기반을 이룸.</li>
  <li>애님 인스턴스의 변수 값에 따라 변화하는 애니메이션 시스템을 설계하는 공간.</li>
  <li>블루프린트로만 제작 가능</li>
  <li>
    <p>스테이트 머신(State Machine 제공)</p>
  </li>
  <li>스테이트 머신(State Machine)</li>
  <li>유한 상태 기계(FSM)</li>
  <li>기계가 반복 수행해야 하는 동작을 설계한 단위인 스테이트(State)를 정의하는 것으로 시작.</li>
  <li>스테이트 머신은 여러개의 스테이트를 설계할 수 있는데, 그 중 하나의 스테이트만 지정해 해당 스테이트에서 지정한 동작을 반복수행한다.</li>
  <li>애니메이션 시스템에서는 캐릭터가 반복해서 재생해야 할 애니메이션 동작을 의미함.</li>
  <li>하나의 스테이트에서 다른 스테이트로 이동하기 위한 조건이 필요한데, 이를 트랜지션(Transition)이라고 한다.</li>
  <li>시작지점인 Entry와 연결된 스테이트를 특별히 ‘시작 스테이트’라고 한다.</li>
</ul>

<h2 id="애니메이션-리타겟">애니메이션 리타겟</h2>
<ul>
  <li>언리얼에서 제공하는 기능으로, 인간형 캐릭터의 경우 스켈레톤의 구성이 달라도 애니메이션을 교환할 수 있도록 제공하는 기능</li>
</ul>

<h2 id="애니메이션-몽타주">애니메이션 몽타주</h2>
<ul>
  <li>Asset의 일종</li>
  <li>몽타주란, 촬영된 화면이나 인쇄된 종이를 떼어 붙여서 새로운 장면이나 이미지를 만드는 미술 기법을 의미한다.</li>
  <li>여러 애니메이션 클립들의 일부를 떼어내고 붙여서 새로운 애니메이션을 생성하는 기법(여러개의 시퀀스를 합쳐서 재생시켜주는 기능)</li>
  <li>스테이트 머신의 확장 없이 특정 상황에서 원하는 애니메이션을 발동시킬 수 있는 기능.</li>
  <li>시작, 루프, 끝 애니메이션을 나눠서 섹션 구간별 이벤트를 발생시킬 수 있는 섹션 기능</li>
  <li>몽타주는 섹션(Section)을 단위로 애니메이션을 관리한다.</li>
  <li>애니메이션 몽타주가 실행되기 이전의 애니메이션 포즈들을 모두 삭제 후, 애니메이션 몽타주에 저장되있는 애니메이션들을 사용한다.</li>
  <li>일정 타이밍에 소리를 출력하거나, 이펙트를 출력하는 등, 시점을 잡을 수 있다.</li>
  <li>커스텀 커브 기능</li>
  <li>
    <p><strong>Pawn이 애니메이션 블루프린트한테 바로 명령을 내릴 수 있다</strong>.</p>
  </li>
  <li>프로세스 : 애니메이션 몽타주 생성 -&gt; 스켈레톤 선택 -&gt; 몽타쥬에 원하는 애니메이션을 정의 후, 캐릭터 블루프린트에서 해당 이벤트가 발생했을 경우 skeletal mesh를 통해서 애니메이션 블루프린트를 가져와서 montage play 함수를 호출한다. -&gt; 애니메이션 블루프린트로 가서 애니메이션 컴포넌트를 최종 애니메이션 포즈로 입력하는 사이에 Montage의 DefaultSlot을 통과하게 중간에 배치한다.</li>
</ul>

<p>### 몽타주 Tick Type</p>
<ul>
  <li>Branching Point : 해당 프레임에 즉각적으로 반응하는 방식. 섹션을 바꾸거나 몽타주 위치 변경을 원할 경우에 적합합니다.</li>
  <li>Queued : 비동기 방식으로 신호를 받는 방식. 타이밍에 민감하지 않은 사운드나 이펙트를 발생시킬 때 사용하는 것이 적합합니다.</li>
</ul>

<h2 id="애니메이션-노티파이">애니메이션 노티파이</h2>
<ul>
  <li>애니메이션을 재생하는 동안 특정 타이밍에 애님 인스턴스에게 신호를 보내는 기능이다.</li>
  <li>애니메이션 블루프린트의 노티파이 섹션에서 우클릭 후 노티파이 추가를 하면 원하는 시점에 애님 인스턴스에게 알림을 보낼 수 있는 노티파이가 추가된다.</li>
  <li>노티파이가 호출되면 엔젠에서 애님 인스턴스 클래스 내부의 ‘AnimNotify_노티파이명’ 으로 작성된 멤버함수를 찾아서 호출한다.</li>
  <li>이 때, 해당 멤버 함수는 반드시 UFUNCTION 매크로가 지정되어 있어야 한다.</li>
</ul>

<h2 id="함수">함수</h2>
<ul>
  <li>Skeletal Mesh -&gt; Get Anim Instance : 스켈레탈 매쉬에 있는 애니메이션 블루프린트를 가져온다.</li>
  <li>Get Anim Instance -&gt; Montage Play : 생성해놓은 애니메이션 몽타주를 실행한다.</li>
  <li>Montage_IsPlaying : 현재 몽타주가 재생되고 있는지 파악 (리턴값 bool)</li>
  <li>본 마다 레이어로 블렌딩 -&gt; Mesh Space Rotation : 본의 좌표 기준으로 할 것인지, 컴포넌트 스페이스 기준으로 할 것인지 정하는 옵션</li>
</ul>

<h2 id="델리게이트">델리게이트</h2>
<ul>
  <li>특정 객체가 해야 할 로직을 다른 객체가 대신 처리할 수 있도록 만드는 보편적인 설계의 개념을 의미한다.</li>
  <li>언리얼에서 델리게이트는 C++ 객체에서만 사용할 수 있는 델리게이트와 C++와 블루프린트 객체가 모두 사용할 수 있는 델리게이트로 나뉜다.</li>
  <li>블루프린트 오브젝트는 멤버 함수에 대한 정보를 저장하고 로딩하는 직렬화(Serialization) 매커니즘이 들어있기 때문에 일반 C++ 언어가 관리하는 방법으로 멤버 함수를 관리할 수 없다.</li>
  <li>그렇기 떄문에 블루프린트와 관련된 C++ 함수는 모두 UFUNCTION 매크로를 사용해야 한다.</li>
  <li>이렇게 블루프린트 객체와도 연동하는 델리게이트를 언리얼 엔진에서는 다이나믹 델리게이트(Dynamic Delegate) 라고 한다.</li>
  <li>언리얼 엔진에서 델리게이트의 선언은 언리얼이 제공하는 매크로를 통해 정의되며, 이를 시그니처(Signature)라고 한다.</li>
  <li>델리게이트를 통해 이용 객체가 어떤 것인지 몰라도 델리게이트에 연결된 함수만 호출하면 되므로, 의존성 없는 설계를 할 수 있다.</li>
</ul>

<h2 id="멀티캐스트-델리게이트">멀티캐스트 델리게이트</h2>
<ul>
  <li>등록 되어 있는 모든 함수에게 알려주는 기능을 하는 델리게이트.(Broadcast)</li>
</ul>


  
    
      <div class="post-tags-section">
  <i class="post-tags-icon fas fa-tags"></i>
  <ul class="post-tags"><li>
        <a class="post-tag" href="/tags/#animation">animation</a></li><li>
        <a class="post-tag" href="/tags/#unreal">unreal</a></li><li>
        <a class="post-tag" href="/tags/#unrealengine">unrealengine</a></li></ul>
</div>

  

  
</article>


<aside class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <a href="/programming/2021/05/19/cpp-effective-til.html">
          Effective C++ Today I Learn (Day1)
          <small><time datetime="2021-05-19T00:00:00+09:00">19 May 2021</time></small>
        </a>
      </li>
    
      <li>
        <a href="/algorithm/2021/05/09/leetcode-linkedlistcycle.html">
          LeetCode LinkedList Cycle 문제
          <small><time datetime="2021-05-09T00:00:00+09:00">09 May 2021</time></small>
        </a>
      </li>
    
      <li>
        <a href="/algorithm/2021/04/20/leetcode-PalindromeLinkedList.html">
          LeetCode PalindromeLinkedList 문제
          <small><time datetime="2021-04-20T00:00:00+09:00">20 Apr 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


</main>

<footer class="footer"><small>
    &copy; 2017&nbsp;-&nbsp;2021 . All rights reserved.
    Powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://github.com/vszhub/not-pure-poole">Not Pure Poole</a>.
  </small>
</footer>
</div>
      <div class="sidebar-right pure-u-1 pure-u-md-1-4">
</div>
    </div>

    <script async src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script><script>
  function strip(str, remove) {
    while (str.length > 0 && remove.indexOf(str.charAt(0)) != -1) {
      str = str.substr(1);
    }
    while (str.length > 0 && remove.indexOf(str.charAt(str.length - 1)) != -1) {
      str = str.substr(0, str.length - 1);
    }
    return str;
  }

  function scroll() {
    console.log('scroll');
    window.scrollTo({
      left: 0, 
      top: window.innerHeight,
      behavior: 'smooth'
    });
    sessionStorage.removeItem('forceCheckScroll');
  }

  const forceCheckScroll = sessionStorage.getItem('forceCheckScroll') === 'true';
  const checkScroll = strip(window.location.pathname, '/') !== strip('', '/');

  if (forceCheckScroll || checkScroll) {
    const maxWidth = "(max-width: 48rem)";
    const result = window.matchMedia(maxWidth);
    if (result.matches) {
      scroll();
    } else {
      result.addListener((match) => {
        if (match.media == maxWidth) {
          if (match.matches) {
            scroll();
          }
        }
      });
    }
  }
</script>
</body>
</html>
